(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))e(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const n of h.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&e(n)}).observe(document,{childList:!0,subtree:!0});function s(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerPolicy&&(h.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?h.credentials="include":i.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function e(i){if(i.ep)return;i.ep=!0;const h=s(i);fetch(i.href,h)}})();class r{constructor(t,s){this.x=t,this.y=s,this.width=40,this.height=40,this.speed=.5,this.life=100,this.image=new Image,this.image.src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgdmlld0JveD0iMCAwIDQwIDQwIj48cmVjdCB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIGZpbGw9IiM2NDZjZmYiIHJ4PSI4Ii8+PC9zdmc+"}moveLeft(t){this.x=Math.max(0,this.x-this.speed*t)}moveRight(t,s){this.x=Math.min(s-this.width,this.x+this.speed*t)}collidesWith(t){const s=this.x<t.x+t.width&&this.x+this.width>t.x,e=this.y<t.y+t.height&&this.y+this.height>t.y;return s&&e}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}reset(){this.life=100,this.x=window.innerWidth/2}}class c{constructor(t,s){this.x=t,this.y=s,this.width=35,this.height=35,this.speed=.2,this.image=new Image,this.image.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB2aWV3Qm94PSIwIDAgMjQgMjQiPgogIDxkZWZzPgogICAgPHN0eWxlPgogICAgICAuY2xzLTEgewogICAgICAgIGZpbGw6ICNhNTU3MTY7CiAgICAgIH0KCiAgICAgIC5jbHMtMiB7CiAgICAgICAgZmlsbDogI2ZmYjIwODsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPGNpcmNsZSBjbGFzcz0iY2xzLTIiIGN4PSIxMiIgY3k9IjEyIiByPSIxMiIvPgogIDxnPgogICAgPHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMTEuNDksMTkuNDVjLS4wNywwLS4xNC0uMDItLjIxLS4wNi0uMTgtLjEyLS4yMy0uMzYtLjEyLS41NGwxLjgxLTIuODNjLjA3LS4xMS4yLS4xOC4zMy0uMThoMy45NGMuMzYsMCwuNjUtLjI5LjY1LS42NXYtNy4yYzAtLjM2LS4yOS0uNjUtLjY1LS42NWgtNC4xMmMtLjIyLDAtLjM5LS4xNy0uMzktLjM5cy4xNy0uMzkuMzktLjM5aDQuMTJjLjc5LDAsMS40My42NCwxLjQzLDEuNDN2Ny4yYzAsLjc5LS42NCwxLjQzLTEuNDMsMS40M2gtMy43MmwtMS43LDIuNjVjLS4wNy4xMi0uMi4xOC0uMzMuMThoMFpNOS42OCwxNi42MmgtMi45MmMtLjc5LDAtMS40My0uNjQtMS40My0xLjQzdi03LjJjMC0uNzkuNjQtMS40MywxLjQzLTEuNDNoMy43Yy4yMiwwLC4zOS4xNy4zOS4zOXMtLjE3LjM5LS4zOS4zOWgtMy43Yy0uMzYsMC0uNjUuMjktLjY1LjY1djcuMmMwLC4zNi4yOS42NS42NS42NWgyLjkyYy4yMiwwLC4zOS4xNy4zOS4zOXMtLjE3LjM5LS4zOS4zOVoiLz4KICAgIDxnPgogICAgICA8Y2lyY2xlIGNsYXNzPSJjbHMtMSIgY3g9IjE0Ljg3IiBjeT0iMTEuNiIgcj0iLjcyIi8+CiAgICAgIDxjaXJjbGUgY2xhc3M9ImNscy0xIiBjeD0iMTIiIGN5PSIxMS42IiByPSIuNzIiLz4KICAgICAgPGNpcmNsZSBjbGFzcz0iY2xzLTEiIGN4PSI5LjEzIiBjeT0iMTEuNiIgcj0iLjcyIi8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4="}update(t){this.y+=this.speed*t}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}}class o{constructor(t,s,e="normal"){this.x=t,this.y=s,this.type=e,this.width=25,this.height=25;const i={normal:.3,fast:.4,spiral:.1};this.speed=i[e],this.angle=0,this.amplitude=50,this.originalX=t,this.image=new Image;const h={normal:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0xMTguMiAzNy42NUMxMTUuOTUgMzUuOTUgOTMuNTQ5OCAxNy42NSA1OS45OTk4IDE3LjY1QzUyLjQ5OTggMTcuNjUgNDUuNTQ5OCAxOC42IDM5LjI0OTggMjAuMDVMOTAuODk5OCA3MS42NUwxMTguMiAzNy42NVpNMTYuMzQ5OCA5Ljg0OTk4TDkuOTk5OCAxNi4yNUwyMC4yNDk4IDI2LjU1QzkuNTQ5OCAzMS40NSAyLjk0OTggMzYuNzUgMS43OTk4IDM3LjY1TDU5Ljk0OTggMTEwLjFMNTkuOTk5OCAxMTAuMTVMNjAuMDQ5OCAxMTAuMUw3OS41NDk4IDg1LjhMOTYuMTQ5OCAxMDIuNEwxMDIuNSA5Ni4wNUwxNi4zNDk4IDkuODQ5OThaIiBmaWxsPSIjRjY2NDYyIi8+Cjwvc3ZnPgo=",fast:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02OS41IDI3LjVMNjcuNSAxNy41SDIyLjVWMTAyLjVIMzIuNVY2Ny41SDYwLjVMNjIuNSA3Ny41SDk3LjVWMjcuNUg2OS41WiIgZmlsbD0iI0Y2NjQ2MiIvPgo8L3N2Zz4K",spiral:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIwIiBoZWlnaHQ9IjEyMCIgdmlld0JveD0iMCAwIDEyMCAxMjAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik02MCAxMEMzMi40IDEwIDEwIDMyLjQgMTAgNjBDMTAgODcuNiAzMi40IDExMCA2MCAxMTBDODcuNiAxMTAgMTEwIDg3LjYgMTEwIDYwQzExMCAzMi40IDg3LjYgMTAgNjAgMTBaTTY1IDg1SDU1VjU1SDY1Vjg1Wk02NSA0NUg1NVYzNUg2NVY0NVoiIGZpbGw9IiNGNjY0NjIiLz4KPC9zdmc+Cg=="};this.image.src=h[e]}update(t){this.type==="spiral"?(this.angle+=.01*t,this.amplitude=Math.max(15,this.amplitude-.01*t),this.x=this.originalX+Math.sin(this.angle)*this.amplitude,this.y+=this.speed*t):this.y+=this.speed*t}draw(t){t.drawImage(this.image,this.x,this.y,this.width,this.height)}}class u{constructor(){this.sounds={coin:new Audio("https://assets.mixkit.co/active_storage/sfx/2019/coin-collect.wav"),hit:new Audio("https://assets.mixkit.co/active_storage/sfx/2020/hit-impact.wav"),gameover:new Audio("https://assets.mixkit.co/active_storage/sfx/2021/game-over.wav")}}load(){Object.values(this.sounds).forEach(t=>{t.load()})}play(t){if(this.sounds[t]){const s=this.sounds[t].cloneNode();s.volume=.5,s.play().catch(()=>{})}}}class g{constructor(t){this.canvas=t,this.ctx=t.getContext("2d"),this.sounds=new u,this.resize(),this.score=0,this.isGameOver=!1,this.difficulty=1,this.lastDifficultyIncrease=0,this.gameTime=0,this.player=new r(this.canvas.width/2,this.canvas.height-60),this.coins=[],this.bullets=[],this.coinSpawnTimer=0,this.bulletSpawnTimer=0,this.keys={left:!1,right:!1},this.mouseX=null,this.usingMouse=!1,this.setupEventListeners(),this.setupMobileControls(),this.setupMouseControls()}resize(){this.canvas.width=this.canvas.clientWidth,this.canvas.height=window.innerHeight*.8,this.player&&(this.player.y=this.canvas.height-60)}setupEventListeners(){window.addEventListener("resize",()=>this.resize()),window.addEventListener("keydown",t=>{t.key==="ArrowLeft"&&(this.keys.left=!0,this.usingMouse=!1),t.key==="ArrowRight"&&(this.keys.right=!0,this.usingMouse=!1),t.preventDefault()}),window.addEventListener("keyup",t=>{t.key==="ArrowLeft"&&(this.keys.left=!1),t.key==="ArrowRight"&&(this.keys.right=!1)}),document.getElementById("restart-button").addEventListener("click",()=>{this.restart()})}setupMouseControls(){this.canvas.addEventListener("mousemove",t=>{const s=this.canvas.getBoundingClientRect();this.mouseX=t.clientX-s.left,this.usingMouse=!0}),this.canvas.addEventListener("mouseleave",()=>{this.mouseX=null,this.usingMouse=!1})}setupMobileControls(){const t=document.getElementById("mobile-controls"),s=document.getElementById("left-btn"),e=document.getElementById("right-btn");"ontouchstart"in window&&(t.classList.remove("hidden"),s.addEventListener("touchstart",i=>{i.preventDefault(),this.keys.left=!0,this.usingMouse=!1}),s.addEventListener("touchend",()=>this.keys.left=!1),e.addEventListener("touchstart",i=>{i.preventDefault(),this.keys.right=!0,this.usingMouse=!1}),e.addEventListener("touchend",()=>this.keys.right=!1)),this.canvas.addEventListener("touchmove",i=>{i.preventDefault();const h=this.canvas.getBoundingClientRect();this.mouseX=i.touches[0].clientX-h.left,this.usingMouse=!0}),this.canvas.addEventListener("touchend",()=>{this.mouseX=null,this.usingMouse=!1})}spawnCoin(){const s=Math.random()*(this.canvas.width-30);if(this.coins.length>0){const e=this.coins[this.coins.length-1];if(Math.abs(e.x-s)<30)return}this.coins.push(new c(s,-30))}spawnBullet(){const t=["normal","fast","spiral"],s=Math.floor(this.difficulty);t.forEach(i=>{const h=Math.random()*(this.canvas.width-20);this.bullets.push(new o(h,-20,i))});const e=Math.max(1,s-3);for(let i=0;i<e;i++){const h=Math.random()*(this.canvas.width-o.width),n=t[Math.floor(Math.random()*t.length)],l=Math.random()*2+3;this.bullets.push(new o(h,-20,n,l))}}updateDifficulty(t){this.gameTime+=t;const s=1+Math.log10(1+this.gameTime/1e4),e=1+Math.log10(1+this.score/200);this.difficulty=Math.min(Math.max(s,e),10)}update(t){if(this.isGameOver)return;if(this.updateDifficulty(t),this.usingMouse&&this.mouseX!==null){const h=this.mouseX-this.player.width/2-this.player.x;this.player.x+=h*.1,this.player.x<0&&(this.player.x=0),this.player.x+this.player.width>this.canvas.width&&(this.player.x=this.canvas.width-this.player.width)}else this.keys.left&&this.player.moveLeft(t),this.keys.right&&this.player.moveRight(t,this.canvas.width);this.coinSpawnTimer+=t;const s=Math.max(500,2e3/this.difficulty+Math.random()*200);this.coinSpawnTimer>s&&(this.spawnCoin(),this.coinSpawnTimer%=s),this.bulletSpawnTimer+=t;const e=Math.max(300,1500/this.difficulty+Math.random()*150);this.bulletSpawnTimer>e&&(this.spawnBullet(),this.bulletSpawnTimer%=e),this.coins=this.coins.filter(i=>(i.update(t*this.difficulty),this.player.collidesWith(i)?(this.score+=10,this.sounds.play("coin"),document.getElementById("score").textContent=`Score: ${this.score}`,!1):i.y<this.canvas.height)),this.bullets=this.bullets.filter(i=>(i.update(t*this.difficulty),this.player.collidesWith(i)?(this.player.life-=10,this.sounds.play("hit"),document.getElementById("life").textContent=`Life: ${this.player.life}`,this.player.life<=0&&this.gameOver(),!1):i.y<this.canvas.height))}draw(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.player.draw(this.ctx),this.coins.forEach(t=>t.draw(this.ctx)),this.bullets.forEach(t=>t.draw(this.ctx))}gameLoop(t){this.lastTime||(this.lastTime=t);const s=t-this.lastTime;this.lastTime=t,this.update(s),this.draw(),this.isGameOver||requestAnimationFrame(e=>this.gameLoop(e))}start(){this.sounds.load(),this.gameTime=0,requestAnimationFrame(t=>this.gameLoop(t))}gameOver(){this.isGameOver=!0,this.sounds.play("gameover"),document.getElementById("game-over").classList.remove("hidden"),document.getElementById("final-score").textContent=this.score}restart(){this.score=0,this.difficulty=1,this.lastDifficultyIncrease=0,this.gameTime=0,this.player=new r(this.canvas.width/2,this.canvas.height-60),this.coins=[],this.bullets=[],this.isGameOver=!1,this.usingMouse=!1,document.getElementById("score").textContent="Score: 0",document.getElementById("life").textContent="Life: 100",document.getElementById("game-over").classList.add("hidden"),this.start()}}window.addEventListener("load",()=>{const a=document.getElementById("gameCanvas");new g(a).start()});
